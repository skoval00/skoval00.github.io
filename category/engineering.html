<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>SkoGround - engineering</title>
        <link rel="stylesheet" href="https://skoval00.github.io/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://skoval00.github.io/">SkoGround </a></h1>
                <nav><ul>
                    <li class="active"><a href="https://skoval00.github.io/category/engineering.html">engineering</a></li>
                    <li><a href="https://skoval00.github.io/category/python.html">python</a></li>
                    <li><a href="https://skoval00.github.io/category/unix.html">unix</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://skoval00.github.io/debugging-of-cpython-processes-with-gdb.html">Debugging of CPython processes with gdb</a></h1>
<footer class="post-info">
        <abbr class="published" title="2016-04-25T00:00:00+03:00">
                Published: Mon 25 April 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://skoval00.github.io/author/skoval00.html">skoval00</a>
        </address>
<p>In <a href="https://skoval00.github.io/category/engineering.html">engineering</a>.</p>

</footer><!-- /.post-info --><p>Key points from <a href="http://podoliaka.org/2016/04/10/debugging-cpython-gdb/">post</a> by Roman Podoliaka</p>
<h2>Prerequisites</h2>
<p>Install gdb and debugging symbols for CPython</p>
<div class="highlight"><pre><span></span>apt-get install gdb python-gdb
</pre></div>


<p>The installed debugging symbols will be used by the CPython script for gdb (<code>cpython/Tools/gdb/libpython.py</code>) in order to analyze the <a href="https://docs.python.org/2/c-api/veryhigh.html#c.PyEval_EvalFrameEx">PyEval_EvalFrameEx</a> frames and map those to application level functions in your code. A frame is essentially a function call and the associated state in a form of local variables, CPU registers, etc.</p>
<h2>Debugging</h2>
<p>Attach to a running CPython process</p>
<div class="highlight"><pre><span></span><span class="x">gdb /usr/bin/python -p </span><span class="p">$</span><span class="nv">PID</span><span class="x"></span>
</pre></div>


<h3>Commands</h3>
<p><code>py-bt</code></p>
<p>Get an application level backtrace for the current thread. Note that some frames are "missing". This is expected, as gdb counts all the interpreter level frames and only some of those are calls in application level code - PyEval_EvalFrameEx ones.</p>
<p><code>py-list</code></p>
<p>Find out what exact line of the application code is currently being executed.</p>
<p><code>py-locals</code></p>
<p>Look at local variables and their values.</p>
<p>Refer to the <a href="https://docs.python.org/devguide/gdb.html">debugging guide</a> for complete list of available commands.</p>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>